controllers:
  OBS:
    scenes:
      - name: TransformGame1
        gameSource: game1
        moveTransitionFilterName: transform
        filters:
          - spin
          - invert
          - delay
        sources:
          - spotlight
          - dvd
listeners:
  - name: DonationFaker
    listener: ws
    controller: obs
    address: http://localhost:8080
    options:
      extraHeaders:
        Authorization: Bearer abc123
      auth:
        token: Bearer abc123
    rules:
      # A rule's function is JS and just needs to return a value
      # either by doing an IIFE or just ensure the final value
      # returned by the script is the value you wish to use.
      - on: "donation:show"
        script: |
          (()=>{
          const uid = event.donationid || event.data?.donationid
          const amount = parseFloat(event.amount || event.data?.amount)
          const amountInCents = parseInt(amount * 100)
          let magnitude = amount / 100

          if(magnitude > 1) {
            magnitude = 1
          }

          if (parseInt(amount * 100)% 2 == 0)
            return {uid: uid, action: "shrink", magnitude}
          else
            return {uid: uid, action: "grow", magnitude}
          })()
      - on: "message"
        script: |
          (() => {
          return {action: "shrink", magnitude: 0.1}
          })()
